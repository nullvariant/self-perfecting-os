---
category: process
date: 2025-10-29
number: 0009
status: Accepted
---

# ADR-0009: ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ç®¡ç†è¦å‰‡ï¼štests/fixtures/é…ä¸‹ã«é›†ç´„

## Status
- **ææ¡ˆæ—¥**: 2025-10-29
- **çŠ¶æ…‹**: Accepted
- **æ±ºå®šè€…**: Claude Code + human

## Context

### èƒŒæ™¯
archive_conversation.pyã®ãƒ†ã‚¹ãƒˆä¸­ã€test_conversation.txtãŒãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆrootã«ä½œæˆã•ã‚Œã€ãƒ•ã‚¡ã‚¤ãƒ«é…ç½®ãŒæ•£ã‚‰ã‹ã£ãŸã€‚ä¸€æ™‚çš„ãªãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã®é…ç½®ãƒ«ãƒ¼ãƒ«ãŒä¸æ˜Žç¢ºã ã£ãŸãŸã‚ã€ä»Šå¾Œã®å†ç™ºé˜²æ­¢ã¨ã—ã¦æ˜Žæ–‡åŒ–ãŒå¿…è¦ã€‚

### å•é¡Œç‚¹
- ã‚¹ã‚¯ãƒªãƒ—ãƒˆãƒ†ã‚¹ãƒˆæ™‚ã«ä¸€æ™‚ãƒ•ã‚¡ã‚¤ãƒ«ãŒãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆrootç›´ä¸‹ã«æ•£ä¹±
- `.gitignore` ç®¡ç†ãŒä¸æ˜Žç¢º
- äººé–“ãƒ»AIã¨ã‚‚ã«åŒã˜ãƒŸã‚¹ã‚’ç¹°ã‚Šè¿”ã™ãƒªã‚¹ã‚¯

### æ¤œè¨Žã—ãŸé¸æŠžè‚¢
1. **é¸æŠžè‚¢A: tests/fixtures/ ã«é›†ç´„ + .gitignore**
   - æ¨™æº–çš„ãªãƒ†ã‚¹ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ ã«å¾“ã†
   - `.gitignore` ã§ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†ã‹ã‚‰é™¤å¤–
   
2. **é¸æŠžè‚¢B: å„ã‚¹ã‚¯ãƒªãƒ—ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªå†…ã«test/ã‚’ä½œæˆ**
   - `scripts/test/` ã®ã‚ˆã†ãªæ§‹é€ 
   - åˆ†æ•£ç®¡ç†ã§ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹å›°é›£

3. **é¸æŠžè‚¢C: ãƒ«ãƒ¼ãƒ«ãªã—ãƒ»å„è‡ªåˆ¤æ–­**
   - ç¾çŠ¶ç¶­æŒ
   - å†ç™ºå¿…è‡³

## Decision

**é¸æŠžè‚¢A ã‚’æŽ¡ç”¨ï¼šã™ã¹ã¦ã®ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã¯ `tests/fixtures/` é…ä¸‹ã«é…ç½®**

### å…·ä½“çš„ãªãƒ«ãƒ¼ãƒ«

#### 1. ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ 
```
tests/
â”œâ”€â”€ README.md              # ãƒ†ã‚¹ãƒˆãƒ«ãƒ¼ãƒ«èª¬æ˜Žï¼ˆã“ã®ADRã¸ã®ãƒªãƒ³ã‚¯å«ã‚€ï¼‰
â”œâ”€â”€ test_*.py              # ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆï¼ˆå°†æ¥çš„ã«ä½œæˆï¼‰â†’ Gitç®¡ç†
â””â”€â”€ fixtures/              # ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿
    â”œâ”€â”€ permanent/         # å›ºå®šãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ï¼ˆå›žå¸°ãƒ†ã‚¹ãƒˆç”¨ï¼‰â†’ Gitç®¡ç†
    â”‚   â”œâ”€â”€ .gitkeep
    â”‚   â””â”€â”€ sample_conversation.md
    â””â”€â”€ temporary/         # ä¸€æ™‚çš„ãªå‹•ä½œç¢ºèªç”¨ â†’ .gitignore
        â”œâ”€â”€ .gitkeep
        â””â”€â”€ *.test.txt
```

#### 2. ãƒ•ã‚¡ã‚¤ãƒ«é…ç½®è¦å‰‡

**A. æ’ä¹…çš„ãªãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ï¼ˆGitç®¡ç†ï¼‰**
- é…ç½®å…ˆ: `tests/fixtures/permanent/`
- ç”¨é€”: ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆã®å›ºå®šãƒ‡ãƒ¼ã‚¿ã€å›žå¸°ãƒ†ã‚¹ãƒˆç”¨å‚ç…§ãƒ‡ãƒ¼ã‚¿
- ç‰¹å¾´: Gitç®¡ç†ã€å†…å®¹ã¯åŸºæœ¬çš„ã«å¤‰æ›´ã—ãªã„
- ä¾‹: `sample_conversation.md`, `expected_frontmatter.yml`

**B. ä¸€æ™‚çš„ãªå‹•ä½œç¢ºèªç”¨ï¼ˆ.gitignoreï¼‰**
- é…ç½®å…ˆ: `tests/fixtures/temporary/`
- ç”¨é€”: é–‹ç™ºä¸­ã®æ‰‹å‹•å‹•ä½œç¢ºèªã€ãã®å ´é™ã‚Šã®ãƒ†ã‚¹ãƒˆ
- ç‰¹å¾´: Gitç®¡ç†ã•ã‚Œãªã„ã€å‰Šé™¤ã—ã¦ã‚‚å•é¡Œãªã„
- ä¾‹: `quick_test.test.txt`, `debug_output.test.md`

**åˆ¤æ–­åŸºæº–:**
- ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ï¼ˆtest_*.pyï¼‰ã‹ã‚‰ä½¿ã† â†’ `permanent/`
- ãã®å ´é™ã‚Šã®ç¢ºèª â†’ `temporary/`
- è¿·ã£ãŸã‚‰ã¾ãš `temporary/`ã€å¾Œã§å¿…è¦ãªã‚‰æ˜‡æ ¼

**å…±é€šãƒ«ãƒ¼ãƒ«:**
- âœ… **ã™ã¹ã¦ã®ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ã¯ `tests/fixtures/` é…ä¸‹ã«é…ç½®**
- âŒ **ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆrootã«ä¸€æ™‚ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã—ãªã„**
- âœ… **ä¸€æ™‚ãƒ•ã‚¡ã‚¤ãƒ«åã¯ `*.test.txt` ã¾ãŸã¯ `*.test.md` æŽ¨å¥¨**

#### 3. .gitignore è¨­å®š
```ignore
# Tests - ä¸€æ™‚ãƒ•ã‚¡ã‚¤ãƒ«ã®ã¿é™¤å¤–ï¼ˆpermanent/ã¯ Git ç®¡ç†ï¼‰
tests/fixtures/temporary/
*.test.txt
*.test.md
```

**Gitç®¡ç†ã•ã‚Œã‚‹ã‚‚ã®:**
- `tests/test_*.py` - ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆ
- `tests/fixtures/permanent/` - å›ºå®šãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿
- `tests/README.md` - ãƒ«ãƒ¼ãƒ«èª¬æ˜Ž

#### 4. ãƒ†ã‚¹ãƒˆå®Ÿè¡Œä¾‹

**ä¸€æ™‚çš„ãªå‹•ä½œç¢ºèªï¼ˆtemporary/ï¼‰:**
```bash
# âœ… æ­£ã—ã„ä¾‹
cat > tests/fixtures/temporary/sample_conversation.test.txt << 'EOF'
ãƒ†ã‚¹ãƒˆç”¨ã®å¯¾è©±å†…å®¹
EOF

python scripts/archive_conversation.py \
  --topic "ãƒ†ã‚¹ãƒˆ" \
  --conversation-file tests/fixtures/temporary/sample_conversation.test.txt
```

**æ’ä¹…çš„ãªãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ï¼ˆpermanent/ï¼‰- å°†æ¥ä½¿ç”¨:**
```bash
# å›ºå®šãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ä½œæˆï¼ˆGitç®¡ç†ï¼‰
cat > tests/fixtures/permanent/standard_conversation.md << 'EOF'
æ¨™æº–çš„ãªå¯¾è©±ãƒ‘ã‚¿ãƒ¼ãƒ³
EOF

# ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆã§ä½¿ç”¨
# tests/test_archive_conversation.py
def test_with_permanent_fixture():
    with open('tests/fixtures/permanent/standard_conversation.md') as f:
        content = f.read()
    # ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ...
```

**âŒ é–“é•ã£ãŸä¾‹:**
```bash
# ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆrootã«ä½œæˆã—ã¦ã¯ã„ã‘ãªã„
cat > test_conversation.txt << 'EOF'  # NG!
EOF
```

#### 5. AI ã¸ã®æŒ‡ç¤º
- ã‚¹ã‚¯ãƒªãƒ—ãƒˆãƒ†ã‚¹ãƒˆæ™‚ã¯ `tests/fixtures/temporary/` ã«ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ä½œæˆ
- ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ã§ä½¿ã†å›ºå®šãƒ‡ãƒ¼ã‚¿ã¯ `tests/fixtures/permanent/` ã«é…ç½®
- ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆrootã«ä¸€æ™‚ãƒ•ã‚¡ã‚¤ãƒ«ä½œæˆç¦æ­¢
- äººé–“ãŒrootã«ä¸€æ™‚ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã—ã‚ˆã†ã¨ã—ãŸã‚‰è­¦å‘Š
- tests/README.md ã«æœ¬ADRã¸ã®ãƒªãƒ³ã‚¯ã‚’è¨˜è¼‰

#### 6. è¨­è¨ˆæ€æƒ³ï¼šé•·æœŸçš„ãªç¾Žã—ã•

ã“ã®ãƒ«ãƒ¼ãƒ«ã¯ã€Œé•·ã„ç›®ã§ã¿ã¦ç¾Žã—ã„ã‹ã©ã†ã‹ã€ã‚’é‡è¦–ã—ã¦è¨­è¨ˆã•ã‚Œã¦ã„ã‚‹ï¼š

- **2å±¤æ§‹é€ ï¼ˆpermanent / temporaryï¼‰**: å°†æ¥ã®ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆå°Žå…¥ã‚’è¦‹æ®ãˆãŸæ‹¡å¼µæ€§
- **æ˜Žç¢ºãªè²¬ä»»åˆ†é›¢**: æ’ä¹…çš„ãƒ‡ãƒ¼ã‚¿ã¨ä¸€æ™‚çš„ãƒ‡ãƒ¼ã‚¿ã‚’æ··åœ¨ã•ã›ãªã„
- **åˆ¤æ–­åŸºæº–ã®æ˜Žæ–‡åŒ–**: äººé–“ãƒ»AIãŒè¿·ã‚ãšåˆ¤æ–­ã§ãã‚‹
- **æ®µéšŽçš„æˆé•·**: ä»Šã¯ `temporary/` ã ã‘ã§ã‚‚ã€å°†æ¥ `permanent/` ãŒè‡ªç„¶ã«è‚²ã¤

ã“ã®è¨­è¨ˆã«ã‚ˆã‚Šã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãŒæˆé•·ã—ã¦ã‚‚æ§‹é€ çš„ãªç¾Žã—ã•ã‚’ç¶­æŒã§ãã‚‹ã€‚

## Consequences

### âœ… ãƒ¡ãƒªãƒƒãƒˆ
- **ãƒ•ã‚¡ã‚¤ãƒ«é…ç½®ã®ä¸€è²«æ€§**: ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã®å ´æ‰€ãŒæ˜Žç¢º
- **ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†ã®æ•´ç†**: ä¸€æ™‚ãƒ•ã‚¡ã‚¤ãƒ«ã®ã¿ `.gitignore`ã€å›ºå®šãƒ‡ãƒ¼ã‚¿ã¯ Git ç®¡ç†
- **AIãƒ»äººé–“ã®å†ç™ºé˜²æ­¢**: æ˜Žæ–‡åŒ–ã•ã‚ŒãŸãƒ«ãƒ¼ãƒ«ã«ã‚ˆã‚ŠåŒã˜ãƒŸã‚¹ã‚’å›žé¿
- **æ¨™æº–çš„ãªæ§‹é€ **: ä¸€èˆ¬çš„ãªãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹é€ ï¼ˆtests/ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªï¼‰ã«æº–æ‹ 
- **å°†æ¥ã¸ã®æ‹¡å¼µæ€§**: ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆå°Žå…¥æ™‚ã«ã‚¹ãƒ ãƒ¼ã‚ºã«ç§»è¡Œå¯èƒ½
- **æ˜Žç¢ºãªè²¬ä»»åˆ†é›¢**: æ’ä¹…çš„ãƒ‡ãƒ¼ã‚¿ï¼ˆpermanent/ï¼‰ã¨ä¸€æ™‚çš„ãƒ‡ãƒ¼ã‚¿ï¼ˆtemporary/ï¼‰ã‚’æ··åœ¨ã•ã›ãªã„
- **é•·æœŸçš„ãªç¾Žã—ã•**: ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæˆé•·å¾Œã‚‚æ§‹é€ çš„ç¾Žè¦³ã‚’ç¶­æŒ
- **tests/README.md**: è©³ç´°ãªãƒ«ãƒ¼ãƒ«èª¬æ˜Ž + åˆ¤æ–­åŸºæº– + å®Ÿè¡Œä¾‹ã§å­¦ç¿’ã‚³ã‚¹ãƒˆå‰Šæ¸›

### âš ï¸ ãƒ‡ãƒ¡ãƒªãƒƒãƒˆ
- **æœ€åˆã®ä¸€æ‰‹é–“**: ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ä½œæˆæ™‚ã« `tests/fixtures/temporary/` ãƒ‘ã‚¹æŒ‡å®šãŒå¿…è¦
- **åˆ¤æ–­ã‚³ã‚¹ãƒˆ**: permanent/ ã¨ temporary/ ã®ã©ã¡ã‚‰ã«ç½®ãã‹åˆ¤æ–­ãŒå¿…è¦ï¼ˆãŸã ã—åˆ¤æ–­åŸºæº–ã¯æ˜Žè¨˜ï¼‰
- **æ—¢å­˜ç¿’æ…£ã®å¤‰æ›´**: rootã«æ°—è»½ã«ä½œæˆã—ã¦ã„ãŸå ´åˆã¯æ…£ã‚ŒãŒå¿…è¦

### ðŸ“‹ TODO
- [x] tests/fixtures/permanent/ ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªä½œæˆ
- [x] tests/fixtures/temporary/ ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªä½œæˆ
- [x] .gitignore ã« tests/fixtures/temporary/, *.test.txt, *.test.md è¿½åŠ 
- [x] tests/README.md ä½œæˆï¼ˆ2å±¤æ§‹é€ ã®èª¬æ˜Ž + åˆ¤æ–­åŸºæº– + å®Ÿè¡Œä¾‹ï¼‰
- [x] tests/fixtures/permanent/.gitkeep ä½œæˆ
- [x] tests/fixtures/temporary/.gitkeep ä½œæˆ
- [x] tests/README.md ã«æœ¬ADR-0009ã¸ã®ãƒªãƒ³ã‚¯è¿½åŠ 
- [x] scripts/README.md ã«ã‚‚ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«é…ç½®ãƒ«ãƒ¼ãƒ«ã‚’è¨˜è¼‰
- [x] .github/copilot-instructions.md ã«ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«é…ç½®ãƒ«ãƒ¼ãƒ«ã‚’è¿½è¨˜
- [x] README.md ã«ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ å›³ã‚’è¿½åŠ 
- [x] CONTRIBUTING.md ã«ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ å›³ã‚’è¿½åŠ 
- [x] DOCUMENTATION_UPDATE_CHECKLIST.md ã« tests/ å¤‰æ›´æ™‚ã®ãƒã‚§ãƒƒã‚¯é …ç›®ã‚’è¿½åŠ 

## Related

### é–¢é€£ã™ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«
- `tests/README.md` - ãƒ†ã‚¹ãƒˆãƒ«ãƒ¼ãƒ«èª¬æ˜Žæ–‡æ›¸
- `tests/fixtures/` - ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª
- `.gitignore` - ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«é™¤å¤–è¨­å®š
- `scripts/archive_conversation.py` - æœ¬ã‚¤ãƒ³ã‚·ãƒ‡ãƒ³ãƒˆã®ç™ºç«¯ã‚¹ã‚¯ãƒªãƒ—ãƒˆ

### é–¢é€£ã™ã‚‹ ADR
- ADR-0008: å¯¾è©±ãƒ­ã‚°ä¿å­˜ã‚·ã‚¹ãƒ†ãƒ ã®è¨­è¨ˆã¨å®Ÿè£…

### é–¢é€£ã™ã‚‹å¯¾è©±ãƒ­ã‚°
- `2025-10-29_Codex_CodeLensè‡ªå‹•å®Ÿè£…ã‚¤ãƒ³ã‚·ãƒ‡ãƒ³ãƒˆã®åŽŸå› è§£æ˜Ž.md` - æœ¬ãƒ«ãƒ¼ãƒ«ç­–å®šã®ãã£ã‹ã‘ã¨ãªã£ãŸã‚¤ãƒ³ã‚·ãƒ‡ãƒ³ãƒˆè¨˜éŒ²

---

**Status**: Accepted  
**æ¬¡ã®ã‚¢ã‚¯ã‚·ãƒ§ãƒ³**: å®Ÿè£…å®Œäº†ã€‚ä»Šå¾Œã®ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ä½œæˆæ™‚ã¯æœ¬ãƒ«ãƒ¼ãƒ«ã«å¾“ã†ã€‚
