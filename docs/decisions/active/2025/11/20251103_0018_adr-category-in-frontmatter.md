# ADR-0018: ã‚«ãƒ†ã‚´ãƒªã‚’ãƒ•ã‚¡ã‚¤ãƒ«åã‹ã‚‰å‰Šé™¤ã—ã€Frontmatterã«ç§»è¡Œ

**Status**: Accepted  
**Decision Date**: 2025-11-03  
**Author**: Claude (Cursor)  
**Category**: documentation  
**Related**: ADR-0002 (naming structure), ADR-0011 (filename case), ADR-0012 (hyphen-underscore)

---

## Context

ç¾åœ¨ã®ADRå‘½åè¦å‰‡ï¼š
```
{YYYYMMDD}_{NNNN}_{lowercase-hyphen-slug}_{category}.md
```

ä¾‹ï¼š
```
20251028_0001_ci-cd-pause_architecture.md
20251029_0011_filename-case-convention_documentation.md
20251030_0015_git-hooks-index-generation_tooling.md
```

### ç™ºè¦‹ã•ã‚ŒãŸå•é¡Œç‚¹

1. **æ¥­ç•Œæ¨™æº–ã¨ã®ä¹–é›¢**
   - RFC: `rfc2616.txt`ï¼ˆç•ªå·ã®ã¿ï¼‰
   - ADRæ¨™æº–: `0001-record-architecture-decisions.md`ï¼ˆç•ªå·+å†…å®¹ï¼‰
   - GitHub Issues: `#123-add-user-authentication`ï¼ˆç•ªå·+å†…å®¹ï¼‰
   - **ã‚«ãƒ†ã‚´ãƒªã‚’ãƒ•ã‚¡ã‚¤ãƒ«åã«å«ã‚ã‚‹ã®ã¯æ¥­ç•Œæ¨™æº–ã§ã¯ãªã„**

2. **èªçŸ¥è² è·ã®å¢—åŠ **
   ```
   20251028_0001_ci-cd-pause_architecture.md
                â””â”€â”€â”€â”€ æ„å‘³ â”€â”€â”€â”€â”˜â””â”€â”€ å±æ€§ â”€â”€â”˜
   ```
   äººé–“ã®èª­ã¿æ–¹: ã€ŒCI/CDã®ãƒãƒ¼ã‚ºã«ã¤ã„ã¦ã€architectureã§æ±ºå®šã—ãŸã€
   â†’ **ä¸»é¡Œï¼ˆæ„å‘³ï¼‰ãŒå…ˆã€å±æ€§ï¼ˆã‚«ãƒ†ã‚´ãƒªï¼‰ãŒå¾Œ** ãŒè‡ªç„¶
   â†’ ã—ã‹ã—ãƒ•ã‚¡ã‚¤ãƒ«åæœ«å°¾ã®ã‚«ãƒ†ã‚´ãƒªã¯ã€Œè¦–ç·šã®ç§»å‹•ã€ã‚’å¼·ã„ã‚‹

3. **ã‚«ãƒ†ã‚´ãƒªã®æ„å‘³ã®æ›–æ˜§ã•**
   - ç¾åœ¨ã®ã‚«ãƒ†ã‚´ãƒª: `architecture`, `documentation`, `tooling`, `process`, `governance`
   - ã“ã‚Œã‚‰ã¯ã€Œä½•ã‚’æ±ºå®šã—ãŸã‹ã€ã§ã¯ãªãã€Œã©ã®é ˜åŸŸã®æ±ºå®šã‹ã€
   - ADRæœ¬æ¥ã®ç›®çš„ï¼ˆä½•ã‚’æ±ºå®šã—ãŸã‹ï¼‰ã¨ã‚«ãƒ†ã‚´ãƒªï¼ˆé ˜åŸŸåˆ†é¡ï¼‰ãŒæ··åœ¨

4. **ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³æ€§ã®å„ªå…ˆ**
   - ADRã®æœ¬è³ªã¯ã€Œæ­´å²çš„è¨˜éŒ²ã€
   - æ™‚ç³»åˆ—é †ãŒæœ€ã‚‚é‡è¦
   - ã‚«ãƒ†ã‚´ãƒªã§ã®ã‚°ãƒ«ãƒ¼ãƒ—åŒ–ã¯äºŒæ¬¡çš„

5. **ãƒ•ã‚¡ã‚¤ãƒ«åã®å†—é•·æ€§**
   ```
   20251029_0011_filename-case-convention_documentation.md
   ```
   â†’ `documentation`ã¯ã€Œãƒ•ã‚¡ã‚¤ãƒ«åè¦å‰‡ã«ã¤ã„ã¦ã®æ±ºå®šã€ã¨ã„ã†å†…å®¹ã‹ã‚‰è‡ªæ˜
   â†’ æƒ…å ±ã®é‡è¤‡

---

## Decision

**ADRå‘½åè¦å‰‡ã‚’ç°¡ç´ åŒ–ã—ã€ã‚«ãƒ†ã‚´ãƒªã‚’YAMLãƒ•ãƒ­ãƒ³ãƒˆãƒã‚¿ãƒ¼ã«ç§»è¡Œã™ã‚‹**

### æ–°ã—ã„å‘½åè¦å‰‡

```
{YYYYMMDD}_{NNNN}_{lowercase-hyphen-slug}.md
```

**ä¾‹**:
```
20251103_0018_adr-category-in-frontmatter.md
20251028_0001_ci-cd-pause.md
20251029_0011_filename-case-convention.md
20251030_0015_git-hooks-index-generation.md
```

### YAMLãƒ•ãƒ­ãƒ³ãƒˆãƒã‚¿ãƒ¼

```yaml
---
category: documentation
date: 2025-11-03
number: 0018
status: Accepted
author: Claude (Cursor)
---
```

**å¿…é ˆãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰**:
- `category`: é ˜åŸŸåˆ†é¡ï¼ˆarchitecture, documentation, tooling, process, governanceï¼‰
- `date`: æ±ºå®šæ—¥ï¼ˆYYYY-MM-DDå½¢å¼ï¼‰
- `number`: é€£ç•ªï¼ˆ4æ¡ã€0001ã‹ã‚‰ï¼‰
- `status`: ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ï¼ˆAccepted, Superseded, Deprecatedï¼‰

**ä»»æ„ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰**:
- `author`: æ±ºå®šè€…ï¼ˆäººé–“ or AIï¼‰
- `supersedes`: ç½®ãæ›ãˆå¯¾è±¡ã®ADRç•ªå·
- `related`: é–¢é€£ADRç•ªå·ï¼ˆé…åˆ—ï¼‰

---

## Rationale

### 1. æ¥­ç•Œæ¨™æº–ã¨ã®æ•´åˆæ€§

```
âœ… RFCæ¨™æº–:
   rfc2616.txt

âœ… ADRæ¨™æº–:
   0001-record-architecture-decisions.md

âœ… GitHubæ¨™æº–:
   #123-add-user-authentication

âœ… æœ¬ADRï¼ˆæ–°è¦å‰‡ï¼‰:
   20251103_0018_adr-category-in-frontmatter.md
```

â†’ **ç•ªå· + å†…å®¹** ãŒæ¥­ç•Œæ¨™æº–ã€ã‚«ãƒ†ã‚´ãƒªã¯**ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿**ã¨ã—ã¦ç®¡ç†

---

### 2. äººé–“ã®èª­ã¿æ–¹ã®è‡ªç„¶æ€§

#### Beforeï¼ˆã‚«ãƒ†ã‚´ãƒªæœ«å°¾ï¼‰
```
20251028_0001_ci-cd-pause_architecture.md
                â””â”€â”€â”€â”€ æ„å‘³ â”€â”€â”€â”€â”˜â””â”€â”€ å±æ€§ â”€â”€â”˜
```

èª­ã¿æ–¹: ã€ŒCI/CDãƒãƒ¼ã‚º... ãˆãƒ¼ã¨... architectureã®æ±ºå®šã€
â†’ **æœ«å°¾ã®ã‚«ãƒ†ã‚´ãƒªã¾ã§è¦–ç·šã‚’å‹•ã‹ã™å¿…è¦**

#### Afterï¼ˆã‚«ãƒ†ã‚´ãƒªãªã—ï¼‰
```
20251028_0001_ci-cd-pause.md
                â””â”€â”€â”€â”€ æ„å‘³ â”€â”€â”€â”€â”˜
```

èª­ã¿æ–¹: ã€ŒCI/CDãƒãƒ¼ã‚ºã«ã¤ã„ã¦ã®æ±ºå®šã€
â†’ **æ„å‘³ã ã‘ãŒç›®ã«å…¥ã‚‹ã€ã‚·ãƒ³ãƒ—ãƒ«**

---

### 3. ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ã®æŸ”è»Ÿæ€§

#### ãƒ•ã‚¡ã‚¤ãƒ«åã«ã‚«ãƒ†ã‚´ãƒªï¼ˆå¾“æ¥ï¼‰
```
20251028_0001_ci-cd-pause_architecture.md
```

**å•é¡Œ**:
- ã‚«ãƒ†ã‚´ãƒªå¤‰æ›´æ™‚ã«ãƒ•ã‚¡ã‚¤ãƒ«åã‚’å¤‰æ›´ï¼ˆGitå±¥æ­´ãŒè¤‡é›‘åŒ–ï¼‰
- ã‚«ãƒ†ã‚´ãƒªä»¥å¤–ã®ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ã‚’è¿½åŠ ã§ããªã„

#### Frontmatterã«ã‚«ãƒ†ã‚´ãƒªï¼ˆæ–°è¦å‰‡ï¼‰
```yaml
---
category: architecture
status: Accepted
author: Claude (Cursor)
tags: [ci-cd, infrastructure]
impact: high
---
```

**ãƒ¡ãƒªãƒƒãƒˆ**:
- âœ… ã‚«ãƒ†ã‚´ãƒªå¤‰æ›´æ™‚ã‚‚ãƒ•ã‚¡ã‚¤ãƒ«åä¸å¤‰
- âœ… ä»–ã®ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ã‚‚è¿½åŠ å¯èƒ½ï¼ˆtags, impact, authorç­‰ï¼‰
- âœ… ãƒ—ãƒ­ã‚°ãƒ©ãƒãƒ†ã‚£ãƒƒã‚¯å‡¦ç†ãŒå®¹æ˜“ï¼ˆYAMLãƒ‘ãƒ¼ã‚µãƒ¼ï¼‰

---

### 4. ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³æ€§ã®ä¿æŒ

```
20251028_0001_ci-cd-pause.md
20251028_0002_naming-structure.md
20251028_0003_lowercase-hyphen-unification.md
20251029_0009_test-fixtures-management.md
20251029_0010_governance-audit.md
20251103_0018_adr-category-in-frontmatter.md
```

â†’ **æ™‚ç³»åˆ—é †ãŒä¸€ç›®ç­ç„¶**ã€ã‚«ãƒ†ã‚´ãƒªã¯é–‹ã‘ã°ç¢ºèªã§ãã‚‹

---

### 5. æ¤œç´¢æ€§ã®å‘ä¸Š

#### ã‚«ãƒ†ã‚´ãƒªã§æ¤œç´¢ï¼ˆBeforeï¼‰
```bash
# ãƒ•ã‚¡ã‚¤ãƒ«åã§grep
grep -r "_architecture.md" docs/decisions/
```

#### ã‚«ãƒ†ã‚´ãƒªã§æ¤œç´¢ï¼ˆAfterï¼‰
```bash
# Frontmatterã§grepï¼ˆã‚ˆã‚ŠæŸ”è»Ÿï¼‰
grep -r "category: architecture" docs/decisions/

# YAMLãƒ‘ãƒ¼ã‚µãƒ¼ã§é«˜åº¦ãªæ¤œç´¢
python scripts/search_adr_by_category.py architecture
```

â†’ **YAMLãƒ™ãƒ¼ã‚¹ã®æ–¹ãŒé«˜åº¦ãªæ¤œç´¢ãƒ»ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ãŒå¯èƒ½**

---

## Consequences

### âœ… Positive

1. **ã‚·ãƒ³ãƒ—ãƒ«åŒ–**: ãƒ•ã‚¡ã‚¤ãƒ«åãŒçŸ­ãã€æ„å‘³ã ã‘ãŒç›®ã«å…¥ã‚‹
2. **æ¥­ç•Œæ¨™æº–ã¨ã®æ•´åˆ**: RFC, GitHub, ADRæ¨™æº–ã¨åŒã˜ãƒ‘ã‚¿ãƒ¼ãƒ³
3. **æŸ”è»Ÿæ€§**: ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ã®è¿½åŠ ãƒ»å¤‰æ›´ãŒå®¹æ˜“
4. **ç¾å­¦**: ãƒ•ã‚¡ã‚¤ãƒ«åãŒã€Œä½•ã«ã¤ã„ã¦ã®æ±ºå®šã‹ã€ã ã‘ã‚’è¡¨ç¾
5. **Gitå±¥æ­´ã®ä¿å…¨**: ã‚«ãƒ†ã‚´ãƒªå¤‰æ›´æ™‚ã‚‚ãƒ•ã‚¡ã‚¤ãƒ«åä¸å¤‰

---

### âš ï¸ Negative

1. **ãƒ•ã‚¡ã‚¤ãƒ«åã ã‘ã§ã‚«ãƒ†ã‚´ãƒªä¸æ˜**: ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é–‹ã‹ãªã„ã¨ã‚«ãƒ†ã‚´ãƒªãŒã‚ã‹ã‚‰ãªã„
2. **ç§»è¡Œã‚³ã‚¹ãƒˆ**: æ—¢å­˜ADR 17å€‹ã®ãƒªãƒãƒ¼ãƒ  + Frontmatterè¿½åŠ 
3. **ã‚¹ã‚¯ãƒªãƒ—ãƒˆæ›´æ–°**: `record_decision.py`, `generate_index.py` ã®ä¿®æ­£ãŒå¿…è¦

---

### ğŸ“‹ Mitigation

1. **INDEX.mdè‡ªå‹•ç”Ÿæˆ**: ã‚«ãƒ†ã‚´ãƒªåˆ¥ã«ã‚°ãƒ«ãƒ¼ãƒ—åŒ–ã—ã¦è¡¨ç¤º
   ```markdown
   ## Architecture
   - [ADR-0001: CI/CD Pause](active/2025/10/20251028_0001_ci-cd-pause.md)
   
   ## Documentation
   - [ADR-0002: Naming Structure](active/2025/10/20251028_0002_naming-structure.md)
   ```

2. **ã‚¹ã‚¯ãƒªãƒ—ãƒˆè‡ªå‹•åŒ–**: ãƒªãƒãƒ¼ãƒ  + Frontmatterè¿½åŠ ã‚’è‡ªå‹•åŒ–
3. **Validation**: `validate_docs.py` ã§Frontmatterå¿…é ˆãƒã‚§ãƒƒã‚¯

---

## Implementation Plan

### Phase 1: ã‚¹ã‚¯ãƒªãƒ—ãƒˆæ›´æ–°
- [ ] `scripts/record_decision.py` ä¿®æ­£ï¼ˆFrontmatterç”Ÿæˆï¼‰
- [ ] `scripts/generate_index.py` ä¿®æ­£ï¼ˆã‚«ãƒ†ã‚´ãƒªåˆ¥ã‚°ãƒ«ãƒ¼ãƒ—åŒ–ï¼‰
- [ ] `scripts/validate_docs.py` ä¿®æ­£ï¼ˆFrontmatteræ¤œè¨¼ï¼‰

### Phase 2: æ—¢å­˜ADRã®ç§»è¡Œ
- [ ] 17å€‹ã®ADRã‚’ãƒªãƒãƒ¼ãƒ ï¼ˆ`_{category}` å‰Šé™¤ï¼‰
- [ ] å„ADRã«Frontmatterè¿½åŠ 
- [ ] Git commitï¼ˆå±¥æ­´ä¿å…¨ï¼‰

### Phase 3: ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ›´æ–°
- [ ] `docs/governance/NAMING_DECISION_SUMMARY.md` æ›´æ–°
- [ ] `docs/decisions/0000_template.md` æ›´æ–°
- [ ] `.cursor/rules/project.mdc` æ›´æ–°

### Phase 4: æ¤œè¨¼
- [ ] INDEX.mdè‡ªå‹•ç”Ÿæˆãƒ†ã‚¹ãƒˆ
- [ ] Validationå®Ÿè¡Œ
- [ ] æ–°ADRä½œæˆãƒ†ã‚¹ãƒˆ

---

## Migration Example

### Before
```
active/2025/10/20251028_0001_ci-cd-pause_architecture.md

# ADR-0001: CI/CDä¸€æ™‚åœæ­¢ã®æ±ºå®š

**Status**: Accepted
**Decision Date**: 2025-10-28
**Author**: GitHub Copilot
```

### After
```
active/2025/10/20251028_0001_ci-cd-pause.md

---
category: architecture
date: 2025-10-28
number: 0001
status: Accepted
author: GitHub Copilot
---

# ADR-0001: CI/CDä¸€æ™‚åœæ­¢ã®æ±ºå®š
```

---

## Validation Rules

### ãƒ•ã‚¡ã‚¤ãƒ«åãƒ‘ã‚¿ãƒ¼ãƒ³
```regex
^(\d{8})_(\d{4})_([a-z0-9-]+)\.md$
```

### Frontmatterå¿…é ˆãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰
```yaml
category: (architecture|documentation|tooling|process|governance)
date: YYYY-MM-DD
number: NNNN (4æ¡)
status: (Accepted|Superseded|Deprecated)
```

---

## Related Decisions

- **ADR-0002**: å‘½åè¦å‰‡ã¨ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ ï¼ˆã“ã®ADRã§ç°¡ç´ åŒ–ï¼‰
- **ADR-0011**: ãƒ•ã‚¡ã‚¤ãƒ«åã‚±ãƒ¼ã‚¹è¦å‰‡ï¼ˆå°æ–‡å­—ãƒ«ãƒ¼ãƒ«ç¶™ç¶šï¼‰
- **ADR-0012**: ãƒã‚¤ãƒ•ãƒ³ vs ã‚¢ãƒ³ãƒ€ãƒ¼ã‚¹ã‚³ã‚¢ï¼ˆãƒã‚¤ãƒ•ãƒ³ç¶™ç¶šï¼‰

---

## Alternatives Considered

### Aæ¡ˆ: ã‚«ãƒ†ã‚´ãƒªã‚’ç•ªå·ã®æ¬¡ã«å‰ç½®
```
20251028_0001_architecture_ci-cd-pause.md
```

**å´ä¸‹ç†ç”±**: 
- ã€Œåˆ†é¡â†’æ„å‘³ã€ã®é †åºã¯éšå±¤çš„ã ãŒã€äººé–“ã®èª­ã¿æ–¹ã¨ã—ã¦é•å’Œæ„Ÿ
- ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³æ€§ã¯ä¿ãŸã‚Œã‚‹ãŒã€è¦–èªæ€§ãŒä½ä¸‹

---

### Bæ¡ˆ: ã‚«ãƒ†ã‚´ãƒªã‚’ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«åˆ†é›¢
```
active/architecture/2025/10/20251028_0001_ci-cd-pause.md
active/documentation/2025/10/20251028_0002_naming-structure.md
```

**å´ä¸‹ç†ç”±**:
- ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªéšå±¤ãŒæ·±ããªã‚‹
- ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³æ€§ãŒå¤±ã‚ã‚Œã‚‹ï¼ˆã‚«ãƒ†ã‚´ãƒªã”ã¨ã«åˆ†æ•£ï¼‰
- ç¾åœ¨ã® `active/YYYY/MM/` æ§‹é€ ãŒå´©ã‚Œã‚‹

---

### Cæ¡ˆ: æ¡æŠï¼ˆæœ¬ADRï¼‰
```
20251028_0001_ci-cd-pause.md

---
category: architecture
---
```

**é¸æŠç†ç”±**:
- âœ… æ¥­ç•Œæ¨™æº–ã¨ã®æ•´åˆæ€§
- âœ… ãƒ•ã‚¡ã‚¤ãƒ«åã®ã‚·ãƒ³ãƒ—ãƒ«åŒ–
- âœ… ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ã®æŸ”è»Ÿæ€§
- âœ… ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³æ€§ã®ä¿æŒ

---

## Summary

ã“ã®ADRã¯ã€**ã€Œãƒ•ã‚¡ã‚¤ãƒ«åã¯æ„å‘³ã‚’ã€ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ã¯å±æ€§ã‚’ã€** ã¨ã„ã†åŸå‰‡ã‚’æ˜ç¢ºåŒ–ã™ã‚‹ã‚‚ã®ã§ã‚ã‚‹ã€‚

**å¤‰æ›´å‰**:
```
20251028_0001_ci-cd-pause_architecture.md
                â””â”€â”€â”€â”€ æ„å‘³ â”€â”€â”€â”€â”˜â””â”€â”€ å±æ€§ â”€â”€â”˜
```

**å¤‰æ›´å¾Œ**:
```
20251028_0001_ci-cd-pause.md          â† ãƒ•ã‚¡ã‚¤ãƒ«åã¯æ„å‘³ã®ã¿

---
category: architecture                â† ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ã¯å±æ€§
---
```

ã“ã‚Œã«ã‚ˆã‚Šï¼š
1. âœ… **æ¥­ç•Œæ¨™æº–ã¨ã®æ•´åˆæ€§**ï¼ˆRFC, GitHub, ADRæ¨™æº–ã¨åŒã˜ãƒ‘ã‚¿ãƒ¼ãƒ³ï¼‰
2. âœ… **äººé–“ã®èª­ã¿ã‚„ã™ã•**ï¼ˆæ„å‘³ã ã‘ãŒç›®ã«å…¥ã‚‹ï¼‰
3. âœ… **ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ã®æŸ”è»Ÿæ€§**ï¼ˆã‚«ãƒ†ã‚´ãƒªä»¥å¤–ã‚‚è¿½åŠ å¯èƒ½ï¼‰
4. âœ… **ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³æ€§ã®ä¿æŒ**ï¼ˆæ™‚ç³»åˆ—é †ãŒæ˜ç¢ºï¼‰
5. âœ… **é•·æœŸçš„ãªç¾å­¦**ï¼ˆã‚·ãƒ³ãƒ—ãƒ«ã§äºˆæ¸¬å¯èƒ½ï¼‰

ãŒå®Ÿç¾ã•ã‚Œã‚‹ã€‚

---

**Status**: âœ… **ACCEPTED**  
**Implementation**: Ready (Phase 1-4ã‚’é †æ¬¡å®Ÿè¡Œ)  
**Last Updated**: 2025-11-03

